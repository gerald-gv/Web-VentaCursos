<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/layout :: layout}">

<div th:fragment="content"
     class="bg-neutral-950 text-white min-h-screen">

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl">

        <!-- VOLVER -->
        <a href="/programas"
           class="inline-block mb-6 text-emerald-400 hover:text-emerald-300 transition">
            ‚Üê Volver al cat√°logo
        </a>

        <!-- CARD PRINCIPAL -->
        <div class="bg-neutral-900 border border-slate-800 rounded-xl p-8 shadow-lg">

            <!-- TITULO -->
            <h1 class="text-3xl font-semibold text-emerald-400 mb-4"
                th:text="${curso.titulo}">
                T√≠tulo del Curso
            </h1>

            <!-- DESCRIPCION -->
            <p class="text-slate-400 leading-relaxed text-lg mb-8"
               th:text="${curso.descripcion}">
                Descripci√≥n detallada
            </p>

            <!-- PRECIO -->
            <div class="bg-neutral-800 border border-slate-700 rounded-lg p-6 mb-8">
                <div class="text-4xl font-bold text-white">

                    <span th:if="${curso.precio == 0}" class="text-emerald-500">
                        üéâ GRATIS
                    </span>

                    <span th:if="${curso.precio > 0}">
                        S/
                        <span class="text-emerald-500"
                              th:text="${#numbers.formatDecimal(curso.precio,1,2)}">
                            0.00
                        </span>
                    </span>

                </div>
            </div>

            <!-- YA COMPRADO -->
            <div th:if="${yaComprado}"
                 class="bg-emerald-500/10 border border-emerald-500 rounded-lg p-4 mb-6 text-center">

                <p class="text-emerald-400 font-medium">
                    ‚úÖ Ya tienes este curso
                </p>

                <a href="/mis-cursos"
                   class="inline-block mt-2 text-white underline hover:text-emerald-300 transition">
                    Ver mis cursos
                </a>

            </div>


            <!-- FORM COMPRA -->
            <form th:if="${!yaComprado}"
                  th:action="@{/comprar-programa}"
                  method="post"
                  class="space-y-6">

                <input type="hidden"
                       name="idCurso"
                       th:value="${curso.idCurso}">

                <!-- METODO PAGO -->
                <div th:if="${curso.precio > 0}">
                    <label for="metodoPago"
                           class="block mb-2 text-sm text-slate-400">
                        M√©todo de pago
                    </label>

                    <select name="metodoPago"
                            id="metodoPago"
                            required
                            class="w-full bg-neutral-800 border border-slate-700 rounded-lg px-4 py-3 text-white focus:border-emerald-500 focus:outline-none transition">

                        <option value="">Selecciona un m√©todo</option>
                        <option value="paypal">PayPal</option>

                    </select>
                </div>


                <!-- BOTON COMPRAR -->
                <button type="submit"
                        class="w-full bg-emerald-600 hover:bg-emerald-500 py-3 rounded-lg font-semibold shadow-lg shadow-emerald-500/30 hover:shadow-emerald-400/30 transition-all duration-300">

                    <span th:if="${curso.precio == 0}">
                        üéì Obtener Gratis
                    </span>

                    <span th:if="${curso.precio > 0}">
                        üí≥ Comprar Ahora
                    </span>

                </button>

            </form>

        </div>

    </div>

</div>
</html>
