<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/admin-layout :: layout(~{::content})}">

<div th:fragment="content">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-10">
        <a href="/admin" class="inline-flex items-center text-[10px] font-bold uppercase tracking-[0.2em] text-neutral-500 hover:text-white transition-all duration-300 group mb-4">
            <svg class="w-4 h-4 mr-2 transform group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
            Volver al Dashboard
        </a>
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-10">
            <div>
                <div class="flex items-center gap-3 mb-1">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 text-emerald-500">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" />
                    </svg>
                    <h1 class="text-3xl font-extrabold text-white tracking-tight">
                        Gestión de Cursos
                    </h1>
                </div>
                <p class="text-slate-400 flex items-center gap-2">
                    <span class="inline-block w-2 h-2 rounded-full bg-emerald-500"></span>
                    Total: <span class="font-medium text-slate-200" th:text="${#lists.size(cursos)}">0</span> cursos registrados
                </p>
            </div>

            <a href="/admin/cursos/nuevo"
               class="inline-flex items-center gap-2 bg-emerald-600 hover:bg-emerald-500 text-white px-5 py-2.5 rounded-xl font-semibold transition-all shadow-lg shadow-emerald-900/20 active:scale-95">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
                    <path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z" />
                </svg>
                Nuevo Curso
            </a>
        </div>

        <div class="grid gap-5">
            <div th:each="curso : ${cursos}"
                 class="group relative bg-neutral-900/50 border border-slate-800 rounded-2xl p-6 hover:bg-neutral-900 hover:border-slate-700 transition-all duration-300"
                 th:classappend="${!curso.activo ? 'border-l-4 border-l-red-500/50 opacity-75' : 'border-l-4 border-l-emerald-500/50'}">

                <div class="flex flex-col lg:flex-row lg:items-center justify-between gap-6">
                    <div class="flex-1">
                        <div class="flex items-center gap-3 mb-3">
                            <h3 class="text-xl font-bold text-white group-hover:text-emerald-400 transition-colors" th:text="${curso.titulo}">
                                Título del Curso
                            </h3>

                            <span th:if="${curso.activo}"
                                  class="text-[10px] uppercase tracking-wider font-bold bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 px-2 py-0.5 rounded-md">
                                  Activo
                            </span>
                            <span th:unless="${curso.activo}"
                                  class="text-[10px] uppercase tracking-wider font-bold bg-red-500/10 text-red-400 border border-red-500/20 px-2 py-0.5 rounded-md">
                                  Inactivo
                            </span>
                        </div>

                        <p class="text-slate-400 text-sm leading-relaxed mb-4 line-clamp-2 max-w-2xl" th:text="${curso.descripcion}">
                            Descripción...
                        </p>

                        <div class="flex flex-wrap items-center gap-y-2 gap-x-6 text-xs font-medium text-slate-500 uppercase tracking-wide">
                            <div class="flex items-center gap-1.5">
                                <span class="text-emerald-500" th:if="${curso.precio == 0}">GRATIS</span>
                                <span class="text-slate-200" th:if="${curso.precio > 0}">
                                    $ <span th:text="${#numbers.formatDecimal(curso.precio,1,2)}">0.00</span>
                                </span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <span class="text-slate-600">Docente:</span>
                                <span class="text-slate-300" th:text="${curso.instructor}">Docente</span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <span class="text-slate-600 text-lg">•</span>
                                <span class="text-slate-300" th:text="${curso.duracion}">Duración</span>
                            </div>
                        </div>
                    </div>

                    <div class="flex flex-wrap items-center gap-2">
                        <a th:href="@{/mis-cursos/{id}(id=${curso.idCurso})}"
                           class="flex-1 sm:flex-none text-center bg-slate-800 hover:bg-slate-700 text-slate-200 px-4 py-2 rounded-lg text-sm font-semibold transition">
                            Vista Previa
                        </a>

                        <a th:href="@{/admin/cursos/editar/{id}(id=${curso.idCurso})}"
                           class="flex-1 sm:flex-none text-center bg-blue-600/10 hover:bg-blue-600 text-blue-500 hover:text-white border border-blue-600/20 px-4 py-2 rounded-lg text-sm font-semibold transition">
                            Editar
                        </a>

                        <button th:data-curso-id="${curso.idCurso}"
                                th:data-curso-titulo="${curso.titulo}"
                                th:data-curso-activo="${curso.activo}"
                                onclick="cambiarEstadoCurso(this)"
                                class="px-4 py-2 rounded-lg text-sm font-medium transition"
                                th:classappend="${curso.activo ? 'bg-orange-600/20 text-orange-500 hover:bg-orange-600 hover:text-white' : 'bg-emerald-600/20 text-emerald-500 hover:bg-emerald-600 hover:text-white'}">

                            <span th:text="${curso.activo ? 'Desactivar' : 'Activar'}">Estado</span>
                        </button>

                    </div>
                </div>
            </div>
        </div>

        <div th:if="${cursos == null or cursos.isEmpty()}"
             class="bg-neutral-900/30 border-2 border-dashed border-slate-800 rounded-3xl p-20 text-center">
            <div class="w-20 h-20 bg-slate-800/50 rounded-full flex items-center justify-center mx-auto mb-6">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 text-slate-500">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" />
                </svg>
            </div>
            <h2 class="text-xl font-bold text-white mb-2">No hay cursos todavía</h2>
            <p class="text-slate-500 mb-8 max-w-xs mx-auto">Tu catálogo está vacío. Crea el primer curso para empezar a enseñar.</p>
            <a href="/admin/cursos/nuevo" class="bg-emerald-600 hover:bg-emerald-500 text-white px-8 py-3 rounded-xl font-bold transition">
                Crear Curso
            </a>
        </div>
    </div>
</div>
</html>
<script th:src="@{/js/admin-confirmaciones.js}"></script>